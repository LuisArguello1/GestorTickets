<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-xl shadow-lg w-full max-w-md p-6">

        <h2 class="text-xl font-semibold text-red-600 mb-4">Eliminar Compañía</h2>
        <p class="mb-6">¿Seguro quieres eliminar <span class="font-semibold">{{ object.name }}</span>?</p>

        <form method="post" id="delete-form" action="{% url 'company:company_delete' object.pk %}" class="flex justify-end space-x-3">
            {% csrf_token %}
            <button type="button" onclick="handleCancel()" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">Cancelar</button>
            <button type="submit" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Eliminar</button>
        </form>

    </div>
</div>

<script>
function handleCancel() {
    document.getElementById('modal-container').innerHTML = '';
}


document.getElementById('delete-form').addEventListener('submit', function(e) {
    e.preventDefault();

    fetch(this.action, {
        method: 'POST',
        body: new FormData(this),
        headers: { 'X-Requested-With': 'XMLHttpRequest' }
    })
    .then(res => res.json()) 
    .then(data => {
        if (data.redirect_url) {
           
            window.location.href = data.redirect_url;
        } else {
            console.error('No se recibió URL de redirección');
        }
    })
    .catch(err => console.error(err));
});
</script>
