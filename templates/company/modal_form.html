<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-lg w-full max-w-lg max-h-[90vh] flex flex-col">
        <!-- Header fijo -->
        <div class="p-6 border-b border-gray-200 shrink-0">
            <h2 class="text-xl font-semibold">
                {% if object %}Editar Compañía{% else %}Nueva Compañía{% endif %}
            </h2>
        </div>

        <!-- Contenido con scroll -->
        <div class="flex-1 overflow-y-auto p-6">
            <form method="post" id="company-form"
                  action="{% if object %}{% url 'company:company_update' object.id %}{% else %}{% url 'company:company_create' %}{% endif %}">
                {% csrf_token %}

                <!-- Información de la Compañía -->
                <div class="mb-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
                        <i class="fas fa-building mr-2 text-gray-600"></i>
                        Información de la Compañía
                    </h3>
                    <div class="space-y-4">
                        <!-- Nombre -->
                        <div>
                            <label for="{{ form.name.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                                {{ form.name.label }}
                            </label>
                            {{ form.name }}
                            {% if form.name.errors %}
                                <p class="text-red-600 text-sm mt-1">{{ form.name.errors|striptags }}</p>
                            {% endif %}
                        </div>

                        <!-- RUC -->
                        <div>
                            <label for="{{ form.ruc.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                                {{ form.ruc.label }}
                            </label>
                            {{ form.ruc }}
                            {% if form.ruc.errors %}
                                <p class="text-red-600 text-sm mt-1">{{ form.ruc.errors|striptags }}</p>
                            {% endif %}
                        </div>

                        <!-- Teléfono -->
                        <div>
                            <label for="{{ form.phone.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                                {{ form.phone.label }}
                            </label>
                            {{ form.phone }}
                            {% if form.phone.errors %}
                                <p class="text-red-600 text-sm mt-1">{{ form.phone.errors|striptags }}</p>
                            {% endif %}
                        </div>

                        <!-- Dirección -->
                        <div>
                            <label for="{{ form.address.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                                {{ form.address.label }}
                            </label>
                            {{ form.address }}
                            {% if form.address.errors %}
                                <p class="text-red-600 text-sm mt-1">{{ form.address.errors|striptags }}</p>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Información Fiscal -->
                <div class="mb-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
                        <i class="fas fa-calculator mr-2 text-gray-600"></i>
                        Información Fiscal
                    </h3>
                    <div class="space-y-4">
                        <!-- Clave de Acceso SRI -->
                        <div>
                            <label for="{{ form.sri_access_key.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                                {{ form.sri_access_key.label }}
                            </label>
                            {{ form.sri_access_key }}
                            {% if form.sri_access_key.errors %}
                                <p class="text-red-600 text-sm mt-1">{{ form.sri_access_key.errors|striptags }}</p>
                            {% endif %}
                        </div>

                        <!-- Porcentaje de IVA -->
                        <div>
                            <label for="{{ form.iva_percentage.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                                {{ form.iva_percentage.label }}
                            </label>
                            {{ form.iva_percentage }}
                            {% if form.iva_percentage.errors %}
                                <p class="text-red-600 text-sm mt-1">{{ form.iva_percentage.errors|striptags }}</p>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Información del Cliente Fijo -->
                <div class="mb-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
                        <i class="fas fa-user-tie mr-2 text-gray-600"></i>
                        Información del Cliente Fijo
                    </h3>
                    <div class="space-y-4">
                        <!-- Nombre del Cliente -->
                        <div>
                            <label for="{{ form.client_name.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                                {{ form.client_name.label }}
                            </label>
                            {{ form.client_name }}
                            {% if form.client_name.errors %}
                                <p class="text-red-600 text-sm mt-1">{{ form.client_name.errors|striptags }}</p>
                            {% endif %}
                        </div>

                        <!-- RUC del Cliente -->
                        <div>
                            <label for="{{ form.client_ruc.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                                {{ form.client_ruc.label }}
                            </label>
                            {{ form.client_ruc }}
                            {% if form.client_ruc.errors %}
                                <p class="text-red-600 text-sm mt-1">{{ form.client_ruc.errors|striptags }}</p>
                            {% endif %}
                        </div>
                    </div>
                </div>

            </form>
        </div>

        <!-- Footer fijo con botones -->
        <div class="border-t border-gray-200 p-6 flex justify-end space-x-3 shrink-0">
            <button type="button" onclick="handleCancel()" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">Cancelar</button>
            <button type="submit" form="company-form" class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">Guardar</button>
        </div>
    </div>
</div>
